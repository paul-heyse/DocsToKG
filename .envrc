# .envrc  (safe & quiet)
export MAMBA_ROOT_PREFIX="$HOME/micromamba"
unset CONDA_PREFIX
unset CONDA_DEFAULT_ENV
eval "$(micromamba shell hook -s bash)"

VENVP="$PWD/.venv"

# Automatically activate the project virtual environment when present.
if [[ -d "$VENVP" ]]; then
    export VIRTUAL_ENV="$VENVP"
    PATH_add "$VIRTUAL_ENV/bin"
else
    echo "direnv warning: missing virtual environment at $VENVP" >&2
fi

# Make the source tree discoverable for agents that rely on PYTHONPATH.
export PYTHONPATH="$PWD/src${PYTHONPATH:+:$PYTHONPATH}"

# Load .env if present (direnv stdlib)
dotenv_if_exists
