

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MODIFIED Requirements &mdash; DocsToKG 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/custom.css" />


      <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../../search.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



          <a href="../../../../../../index.html" class="icon icon-home">
            DocsToKG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../01-overview/index.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../02-setup/index.html">1. Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../03-architecture/index.html">1. Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../04-api/index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../05-development/index.html">1. Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../06-operations/index.html">1. Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../../07-reference/index.html">1. Technical Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">DocsToKG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">MODIFIED Requirements</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/openspec/changes/archive/2025-10-14-extend-hybrid-vector-scale-tests/specs/hybrid-search/spec.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <section id="modified-requirements">
<h1>MODIFIED Requirements<a class="headerlink" href="#modified-requirements" title="Link to this heading"></a></h1>
<section id="requirement-validation-and-calibration-suite">
<h2>Requirement: Validation and Calibration Suite<a class="headerlink" href="#requirement-validation-and-calibration-suite" title="Link to this heading"></a></h2>
<p>An automated validation harness SHALL cover ingest integrity (field presence, dimension checks), dense self-hit accuracy (≥0.95 &#64;1 for IVF or 1.00 for Flat), sparse relevance sanity (≥90% self-match &#64;10), namespace filtering, pagination stability, fusion efficacy, highlight packaging, and calibration sweeps for <code class="docutils literal notranslate"><span class="pre">nprobe</span></code>/PQ parameters. The harness SHALL support both lightweight synthetic fixtures and a curated real-vector dataset that includes full-dimension Qwen embeddings and SPLADE weights, verify that chunk/vector UUIDs align, ensure BM25/SPLADE features deserialize without loss, and emit timestamped JSON + text reports under <code class="docutils literal notranslate"><span class="pre">reports/validation/&lt;timestamp&gt;/</span></code> for all runs. The harness SHALL additionally support a high-volume fixture (≥500 vectors) that enables scale-oriented correctness, operational, and performance testing while enforcing acceptance thresholds.</p>
<section id="scenario-scale-validation-run">
<h3>Scenario: Scale validation run<a class="headerlink" href="#scenario-scale-validation-run" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>GIVEN</strong> a curated real-vector fixture containing at least 500 chunk/vector pairs across multiple namespaces</p></li>
<li><p><strong>WHEN</strong> the validation command executes in scale mode</p></li>
<li><p><strong>THEN</strong> ingest integrity, CRUD parity, dense/BM25/SPLADE correctness, pagination, fusion (RRF/MMR), result shaping, backup/restore, ACL, performance, stability, and calibration checks run end-to-end with recorded metrics and thresholds</p></li>
<li><p><strong>AND</strong> the resulting report captures per-check pass/fail status, latency percentiles, recall metrics, redundancy measurements, snapshot parity, and guardrail alerts</p></li>
<li><p><strong>AND</strong> the run fails if any acceptance threshold is missed</p></li>
</ul>
</section>
</section>
</section>
<section id="added-requirements">
<h1>ADDED Requirements<a class="headerlink" href="#added-requirements" title="Link to this heading"></a></h1>
<section id="requirement-scale-regression-coverage">
<h2>Requirement: Scale Regression Coverage<a class="headerlink" href="#requirement-scale-regression-coverage" title="Link to this heading"></a></h2>
<p>The hybrid search regression suite SHALL execute a comprehensive battery of tests over a ≥500-vector corpus that includes: (1) data sanity and schema verification, (2) batch ingest/update/delete with namespace isolation, (3) dense FAISS self-hit/recall evaluations (including optional CPU ground truth), (4) BM25 and SPLADE curated relevance checks, (5) pagination stability across OpenSearch PIT and FAISS, (6) hybrid fusion (RRF) effectiveness and MMR diversification analysis, (7) result shaping collapse/dedupe/highlight validation, (8) backup/restore parity comparisons, (9) ACL security enforcement, (10) performance and capacity profiling, (11) stability/determinism replays, (12) calibration sweeps for FAISS and fusion parameters, and (13) consolidated reporting with acceptance thresholds. Acceptance thresholds SHALL include at minimum: dense self-hit ≥0.99 (Flat) or ≥0.95 (IVF), ANN recall&#64;10 ≥0.95 for calibrated <code class="docutils literal notranslate"><span class="pre">nprobe</span></code>, BM25 and SPLADE hit-rate&#64;10 ≥0.8 on curated sets, RRF outperforming best single channel on NDCG&#64;10, MMR reducing redundancy by ≥20% with ≤2% absolute hit-rate loss, pagination with zero overlaps, backup/restore score parity within defined float tolerances, ACL isolation with zero cross-namespace leakage, p95 end-to-end latency within the documented SLA, GPU memory headroom ≥20%, and deterministic repeats across ≥10 runs. The suite SHALL persist artifacts (JSON/CSV) with inputs, parameters, metrics, and pass/fail outcomes for each category.</p>
<section id="scenario-execute-scale-regression-suite">
<h3>Scenario: Execute scale regression suite<a class="headerlink" href="#scenario-execute-scale-regression-suite" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>GIVEN</strong> the ≥500-vector fixture and configured thresholds</p></li>
<li><p><strong>WHEN</strong> the regression entrypoint runs</p></li>
<li><p><strong>THEN</strong> each test category enumerated above executes, collects metrics (e.g., hit-rate&#64;k, recall&#64;k, latency percentiles, GPU memory usage), and persists artifacts to the designated report directory</p></li>
<li><p><strong>AND</strong> the suite fails fast if ingest counts diverge or serialization fails, otherwise proceeds and marks specific categories as failed when thresholds are unmet</p></li>
</ul>
</section>
<section id="scenario-integrate-scale-suite-with-ci-nightly-automation">
<h3>Scenario: Integrate scale suite with CI/nightly automation<a class="headerlink" href="#scenario-integrate-scale-suite-with-ci-nightly-automation" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p><strong>GIVEN</strong> the continuous integration job is configured with access to the large fixture and compute resources</p></li>
<li><p><strong>WHEN</strong> the job triggers the scale regression suite</p></li>
<li><p><strong>THEN</strong> artifacts (reports, logs, metric summaries) are archived, acceptance thresholds are enforced, and build status reflects the pass/fail outcome</p></li>
<li><p><strong>AND</strong> alerts are raised for latency regressions, recall drops, or guardrail breaches captured during calibration sweeps</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, DocsToKG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
