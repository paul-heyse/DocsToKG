

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Module: logging_config &mdash; DocsToKG 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />


      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
</head>

<body class="wy-body-for-nav">
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >



          <a href="../index.html" class="icon icon-home">
            DocsToKG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01-overview/index.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-setup/index.html">1. Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-architecture/index.html">1. Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-development/index.html">1. Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-operations/index.html">1. Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-reference/index.html">1. Technical Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DocsToKG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">1. Module: logging_config</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/04-api/DocsToKG.OntologyDownload.logging_config.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">

  <section id="module-logging-config">
<h1>1. Module: logging_config<a class="headerlink" href="#module-logging-config" title="Link to this heading"></a></h1>
<p>Structured logging utilities formerly exposed via
<code class="docutils literal notranslate"><span class="pre">DocsToKG.OntologyDownload.logging_config</span></code> are now available from
<code class="docutils literal notranslate"><span class="pre">DocsToKG.OntologyDownload.ontology_download</span></code> and re-exported through the
package facade.</p>
<p>The refactored downloader emits JSON logs with correlation identifiers so
concurrent planning, streaming normalization, and resolver fallback attempts
can be traced. This module wires log rotation, retention, masking, and
correlation id helpers that are also surfaced through the enhanced <code class="docutils literal notranslate"><span class="pre">doctor</span></code>
diagnostics command.</p>
<section id="functions">
<h2>1. Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h2>
<section id="mask-sensitive-data-payload">
<h3><code class="docutils literal notranslate"><span class="pre">mask_sensitive_data(payload)</span></code><a class="headerlink" href="#mask-sensitive-data-payload" title="Link to this heading"></a></h3>
<p>Remove secrets from structured payloads prior to logging.</p>
<p>Args:
payload: Arbitrary key-value pairs that may contain credentials or
tokens gathered from ontology download requests.</p>
<p>Returns:
Copy of the payload where common secret fields are replaced with
<code class="docutils literal notranslate"><span class="pre">***masked***</span></code>.</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>mask_sensitive_data({“token”: “secret”, “status”: “ok”})
{‘token’: ‘<em><strong>masked</strong></em>’, ‘status’: ‘ok’}</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="generate-correlation-id">
<h3><code class="docutils literal notranslate"><span class="pre">generate_correlation_id()</span></code><a class="headerlink" href="#generate-correlation-id" title="Link to this heading"></a></h3>
<p>Create a short-lived identifier that links related log entries.</p>
<p>Args:
None</p>
<p>Returns:
Twelve character hexadecimal identifier suitable for correlating log
events across the ontology download pipeline.</p>
<p>Raises:
None</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>cid = generate_correlation_id()
len(cid)
12</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="compress-old-log-path">
<h3><code class="docutils literal notranslate"><span class="pre">_compress_old_log(path)</span></code><a class="headerlink" href="#compress-old-log-path" title="Link to this heading"></a></h3>
<p>Compress a log file in-place using gzip to reclaim disk space.</p>
<p>Args:
path: Path to the <code class="docutils literal notranslate"><span class="pre">.log</span></code> file that should be compressed.</p>
</section>
<section id="cleanup-logs-log-dir-retention-days">
<h3><code class="docutils literal notranslate"><span class="pre">_cleanup_logs(log_dir,</span> <span class="pre">retention_days)</span></code><a class="headerlink" href="#cleanup-logs-log-dir-retention-days" title="Link to this heading"></a></h3>
<p>Apply rotation and retention policy to the log directory.</p>
<p>Args:
log_dir: Directory containing daily log files.
retention_days: Number of days to keep uncompressed or compressed logs
before deleting them.</p>
</section>
<section id="setup-logging">
<h3><code class="docutils literal notranslate"><span class="pre">setup_logging()</span></code><a class="headerlink" href="#setup-logging" title="Link to this heading"></a></h3>
<p>Configure structured logging handlers for ontology downloads.</p>
<p>Args:
level: Logging level string (e.g., <code class="docutils literal notranslate"><span class="pre">INFO</span></code> or <code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>).
retention_days: Number of days to retain log files before compression/removal.
max_log_size_mb: Maximum size of individual log files before rotation.
log_dir: Optional directory override for log file placement.</p>
<p>Returns:
Configured logger instance scoped to the ontology downloader.</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>logger = setup_logging(level=”INFO”, max_log_size_mb=1, retention_days=1)
logger.name
‘DocsToKG.OntologyDownload’</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="format-self-record">
<h3><code class="docutils literal notranslate"><span class="pre">format(self,</span> <span class="pre">record)</span></code><a class="headerlink" href="#format-self-record" title="Link to this heading"></a></h3>
<p>Serialize a logging record into a JSON line.</p>
<p>Args:
record: Log record emitted by the ontology download components.</p>
<p>Returns:
UTF-8 safe JSON string with masked secrets and correlation context.</p>
</section>
</section>
<section id="classes">
<h2>2. Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h2>
<section id="jsonformatter">
<h3><code class="docutils literal notranslate"><span class="pre">JSONFormatter</span></code><a class="headerlink" href="#jsonformatter" title="Link to this heading"></a></h3>
<p>Formatter emitting JSON structured logs.</p>
<p>Attributes:
None</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>formatter = JSONFormatter()
isinstance(formatter.format(logging.makeLogRecord({‘msg’: ‘test’})), str)
True</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, DocsToKG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

</body>
</html>
