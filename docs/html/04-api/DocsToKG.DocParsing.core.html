

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Module: core &mdash; DocsToKG 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            DocsToKG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01-overview/index.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-setup/index.html">1. Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-architecture/index.html">1. Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-development/index.html">1. Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-operations/index.html">1. Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-reference/index.html">1. Technical Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DocsToKG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">1. Module: core</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/04-api/DocsToKG.DocParsing.core.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-core">
<h1>1. Module: core<a class="headerlink" href="#module-core" title="Link to this heading"></a></h1>
<p>This reference documents the DocsToKG module <code class="docutils literal notranslate"><span class="pre">DocsToKG.DocParsing.core</span></code>.</p>
<section id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>DocParsing Core Utilities</p>
<p>This module centralises lightweight helpers that power multiple DocParsing
pipeline stages. Utilities span path discovery, atomic file writes, JSONL
parsing, manifest bookkeeping, CLI glue, and structured logging so that
chunking, embedding, and conversion scripts can share consistent behaviour
without an additional dependency layer.</p>
<p>Key Features:</p>
<ul class="simple">
<li><p>Resolve DocsToKG data directories with environment and ancestor discovery</p></li>
<li><p>Stream JSONL inputs and outputs with validation and error tolerance</p></li>
<li><p>Emit structured JSON logs suited for machine ingestion and dashboards</p></li>
<li><p>Manage pipeline manifests, batching helpers, and advisory file locks</p></li>
</ul>
<p>Usage:
from DocsToKG.DocParsing import core</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>chunks_dir = core.data_chunks()
with core.atomic_write(chunks_dir / &quot;example.jsonl&quot;) as handle:
    handle.write(&quot;{}&quot;)
</pre></div>
</div>
<p>Dependencies:</p>
<ul class="simple">
<li><p>json, pathlib, logging: Provide standard I/O and diagnostics primitives.</p></li>
<li><p>typing: Supply type hints consumed by Sphinx documentation tooling and API generators.</p></li>
<li><p>pydantic (optional): Some helpers integrate with schema validation routines.</p></li>
</ul>
<p>All helpers are safe to import in multiprocessing contexts and avoid heavy
third-party dependencies beyond the standard library.</p>
</section>
<section id="functions">
<h2>2. Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h2>
<section id="ensure-str-sequence-value-label">
<h3><code class="docutils literal notranslate"><span class="pre">_ensure_str_sequence(value,</span> <span class="pre">label)</span></code><a class="headerlink" href="#ensure-str-sequence-value-label" title="Link to this heading"></a></h3>
<p>Normalise structural marker entries into string lists.</p>
</section>
<section id="load-structural-marker-profile-path">
<h3><code class="docutils literal notranslate"><span class="pre">load_structural_marker_profile(path)</span></code><a class="headerlink" href="#load-structural-marker-profile-path" title="Link to this heading"></a></h3>
<p>Load heading/caption marker overrides from JSON, YAML, or TOML files.</p>
</section>
<section id="load-structural-marker-config-path">
<h3><code class="docutils literal notranslate"><span class="pre">load_structural_marker_config(path)</span></code><a class="headerlink" href="#load-structural-marker-config-path" title="Link to this heading"></a></h3>
<p>Backward compatible alias for :func:<code class="docutils literal notranslate"><span class="pre">load_structural_marker_profile</span></code>.</p>
</section>
<section id="build-subcommand-parser-options">
<h3><code class="docutils literal notranslate"><span class="pre">build_subcommand(parser,</span> <span class="pre">options)</span></code><a class="headerlink" href="#build-subcommand-parser-options" title="Link to this heading"></a></h3>
<p>Attach CLI options described by <code class="docutils literal notranslate"><span class="pre">options</span></code> to <code class="docutils literal notranslate"><span class="pre">parser</span></code>.</p>
</section>
<section id="normalize-http-timeout-timeout">
<h3><code class="docutils literal notranslate"><span class="pre">normalize_http_timeout(timeout)</span></code><a class="headerlink" href="#normalize-http-timeout-timeout" title="Link to this heading"></a></h3>
<p>Normalize timeout inputs into a <code class="docutils literal notranslate"><span class="pre">(connect,</span> <span class="pre">read)</span></code> tuple of floats.</p>
</section>
<section id="get-http-session">
<h3><code class="docutils literal notranslate"><span class="pre">get_http_session()</span></code><a class="headerlink" href="#get-http-session" title="Link to this heading"></a></h3>
<p>Return a shared :class:<code class="docutils literal notranslate"><span class="pre">requests.Session</span></code> configured with retries.</p>
<p>Args:
timeout: Optional override for the <code class="docutils literal notranslate"><span class="pre">(connect,</span> <span class="pre">read)</span></code> timeout tuple. Scalars
override only the read timeout while preserving the default connect value.
base_headers: Headers merged into the shared session.
retry_total: Maximum retry attempts applied for connect/read failures.
retry_backoff: Exponential backoff factor between retries.
status_forcelist: HTTP status codes that trigger retries.
allowed_methods: HTTP verbs eligible for retries.</p>
<p>Returns:
Tuple containing the shared session and the effective timeout tuple.</p>
</section>
<section id="derive-doc-id-and-doctags-path-source-pdf-pdfs-root-doctags-root">
<h3><code class="docutils literal notranslate"><span class="pre">derive_doc_id_and_doctags_path(source_pdf,</span> <span class="pre">pdfs_root,</span> <span class="pre">doctags_root)</span></code><a class="headerlink" href="#derive-doc-id-and-doctags-path-source-pdf-pdfs-root-doctags-root" title="Link to this heading"></a></h3>
<p>Return manifest doc identifier and DocTags output path for <code class="docutils literal notranslate"><span class="pre">source_pdf</span></code>.</p>
</section>
<section id="derive-doc-id-and-chunks-path-doctags-file-doctags-root-chunks-root">
<h3><code class="docutils literal notranslate"><span class="pre">derive_doc_id_and_chunks_path(doctags_file,</span> <span class="pre">doctags_root,</span> <span class="pre">chunks_root)</span></code><a class="headerlink" href="#derive-doc-id-and-chunks-path-doctags-file-doctags-root-chunks-root" title="Link to this heading"></a></h3>
<p>Return manifest doc identifier and chunk output path for <code class="docutils literal notranslate"><span class="pre">doctags_file</span></code>.</p>
</section>
<section id="derive-doc-id-and-vectors-path-chunk-file-chunks-root-vectors-root">
<h3><code class="docutils literal notranslate"><span class="pre">derive_doc_id_and_vectors_path(chunk_file,</span> <span class="pre">chunks_root,</span> <span class="pre">vectors_root)</span></code><a class="headerlink" href="#derive-doc-id-and-vectors-path-chunk-file-chunks-root-vectors-root" title="Link to this heading"></a></h3>
<p>Return manifest doc identifier and vectors output path for <code class="docutils literal notranslate"><span class="pre">chunk_file</span></code>.</p>
<p>Args:
chunk_file: Path to the chunk JSONL artefact.
chunks_root: Root directory containing chunk artefacts.
vectors_root: Root directory where vector outputs should be written.</p>
<p>Returns:
Tuple containing the manifest <code class="docutils literal notranslate"><span class="pre">doc_id</span></code> and the full vectors output path.</p>
</section>
<section id="compute-relative-doc-id-path-root">
<h3><code class="docutils literal notranslate"><span class="pre">compute_relative_doc_id(path,</span> <span class="pre">root)</span></code><a class="headerlink" href="#compute-relative-doc-id-path-root" title="Link to this heading"></a></h3>
<p>Return POSIX-style relative identifier for a document path.</p>
<p>Args:
path: Absolute path to the document on disk.
root: Root directory that anchors relative identifiers.</p>
<p>Returns:
str: POSIX-style relative path suitable for manifest IDs.</p>
</section>
<section id="compute-stable-shard-identifier-shard-count">
<h3><code class="docutils literal notranslate"><span class="pre">compute_stable_shard(identifier,</span> <span class="pre">shard_count)</span></code><a class="headerlink" href="#compute-stable-shard-identifier-shard-count" title="Link to this heading"></a></h3>
<p>Deterministically map <code class="docutils literal notranslate"><span class="pre">identifier</span></code> to a shard in <code class="docutils literal notranslate"><span class="pre">[0,</span> <span class="pre">shard_count)</span></code>.</p>
</section>
<section id="should-skip-output-output-path-manifest-entry-input-hash-resume-force">
<h3><code class="docutils literal notranslate"><span class="pre">should_skip_output(output_path,</span> <span class="pre">manifest_entry,</span> <span class="pre">input_hash,</span> <span class="pre">resume,</span> <span class="pre">force)</span></code><a class="headerlink" href="#should-skip-output-output-path-manifest-entry-input-hash-resume-force" title="Link to this heading"></a></h3>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> when resume/skip conditions indicate work can be skipped.</p>
</section>
<section id="find-free-port-start-span">
<h3><code class="docutils literal notranslate"><span class="pre">find_free_port(start,</span> <span class="pre">span)</span></code><a class="headerlink" href="#find-free-port-start-span" title="Link to this heading"></a></h3>
<p>Locate an available TCP port on localhost within a range.</p>
<p>Args:
start: Starting port for the scan. Defaults to <code class="docutils literal notranslate"><span class="pre">8000</span></code>.
span: Number of sequential ports to check. Defaults to <code class="docutils literal notranslate"><span class="pre">32</span></code>.</p>
<p>Returns:
The first free port number. Falls back to an OS-assigned ephemeral port
if the requested range is exhausted.</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>port = find_free_port(8500, 1)
isinstance(port, int)
True</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="iter-chunks-directory">
<h3><code class="docutils literal notranslate"><span class="pre">iter_chunks(directory)</span></code><a class="headerlink" href="#iter-chunks-directory" title="Link to this heading"></a></h3>
<p>Yield chunk JSONL files from <code class="docutils literal notranslate"><span class="pre">directory</span></code> and all descendants.</p>
<p>Args:
directory: Directory containing chunk artifacts.</p>
<p>Returns:
Iterator over absolute <code class="docutils literal notranslate"><span class="pre">Path</span></code> objects.</p>
<p>Yields:
Absolute paths to files matching <code class="docutils literal notranslate"><span class="pre">*.chunks.jsonl</span></code> sorted
lexicographically.</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>next(iter_chunks(Path(“.”)), None) is None
True</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="acquire-lock-path-timeout">
<h3><code class="docutils literal notranslate"><span class="pre">acquire_lock(path,</span> <span class="pre">timeout)</span></code><a class="headerlink" href="#acquire-lock-path-timeout" title="Link to this heading"></a></h3>
<p>Acquire an advisory lock using <code class="docutils literal notranslate"><span class="pre">.lock</span></code> sentinel files.</p>
<p>Args:
path: Target file path whose lock should be acquired.
timeout: Maximum time in seconds to wait for the lock.</p>
<p>Returns:
Iterator yielding a boolean when the lock is acquired.</p>
<p>Yields:
<code class="docutils literal notranslate"><span class="pre">True</span></code> once the lock is acquired.</p>
<p>Raises:
TimeoutError: If the lock cannot be obtained within <code class="docutils literal notranslate"><span class="pre">timeout</span></code>.</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>target = Path(“/tmp/lock.txt”)
with acquire_lock(target):
…     pass</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="pid-is-running-pid">
<h3><code class="docutils literal notranslate"><span class="pre">_pid_is_running(pid)</span></code><a class="headerlink" href="#pid-is-running-pid" title="Link to this heading"></a></h3>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> if a process with the given PID appears to be alive.</p>
</section>
<section id="set-spawn-or-warn-logger">
<h3><code class="docutils literal notranslate"><span class="pre">set_spawn_or_warn(logger)</span></code><a class="headerlink" href="#set-spawn-or-warn-logger" title="Link to this heading"></a></h3>
<p>Ensure the multiprocessing start method is set to <code class="docutils literal notranslate"><span class="pre">spawn</span></code>.</p>
<p>Args:
logger: Optional logger that receives diagnostic messages about the start
method configuration.</p>
<p>Returns:
None: The function mutates global multiprocessing state and logs warnings.</p>
<p>This helper attempts to set the start method to <code class="docutils literal notranslate"><span class="pre">spawn</span></code> with <code class="docutils literal notranslate"><span class="pre">force=True</span></code>.
If a <code class="docutils literal notranslate"><span class="pre">RuntimeError</span></code> occurs (meaning the method was already set), it checks
if the current method is <code class="docutils literal notranslate"><span class="pre">spawn</span></code>. If not, it emits a warning about the
potential CUDA safety risk, logging the current method so callers understand
the degraded safety state.</p>
</section>
<section id="run-chunk-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_run_chunk(argv)</span></code><a class="headerlink" href="#run-chunk-argv" title="Link to this heading"></a></h3>
<p>Execute the Docling chunker subcommand.</p>
</section>
<section id="run-embed-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_run_embed(argv)</span></code><a class="headerlink" href="#run-embed-argv" title="Link to this heading"></a></h3>
<p>Execute the embedding pipeline subcommand.</p>
</section>
<section id="run-token-profiles-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_run_token_profiles(argv)</span></code><a class="headerlink" href="#run-token-profiles-argv" title="Link to this heading"></a></h3>
<p>Execute the tokenizer profiling subcommand.</p>
</section>
<section id="run-plan-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_run_plan(argv)</span></code><a class="headerlink" href="#run-plan-argv" title="Link to this heading"></a></h3>
<p>Display the doctags → chunk → embed plan without executing.</p>
</section>
<section id="run-manifest-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_run_manifest(argv)</span></code><a class="headerlink" href="#run-manifest-argv" title="Link to this heading"></a></h3>
<p>Inspect pipeline manifest artifacts via CLI.</p>
</section>
<section id="build-doctags-parser-prog">
<h3><code class="docutils literal notranslate"><span class="pre">_build_doctags_parser(prog)</span></code><a class="headerlink" href="#build-doctags-parser-prog" title="Link to this heading"></a></h3>
<p>Create an :mod:<code class="docutils literal notranslate"><span class="pre">argparse</span></code> parser configured for DocTags conversion.</p>
</section>
<section id="scan-pdf-html-input-dir">
<h3><code class="docutils literal notranslate"><span class="pre">_scan_pdf_html(input_dir)</span></code><a class="headerlink" href="#scan-pdf-html-input-dir" title="Link to this heading"></a></h3>
<p>Return booleans indicating whether PDFs or HTML files exist beneath <code class="docutils literal notranslate"><span class="pre">input_dir</span></code>.</p>
</section>
<section id="directory-contains-suffixes-directory-suffixes">
<h3><code class="docutils literal notranslate"><span class="pre">_directory_contains_suffixes(directory,</span> <span class="pre">suffixes)</span></code><a class="headerlink" href="#directory-contains-suffixes-directory-suffixes" title="Link to this heading"></a></h3>
<p>Return True when <code class="docutils literal notranslate"><span class="pre">directory</span></code> contains at least one file ending with <code class="docutils literal notranslate"><span class="pre">suffixes</span></code>.</p>
</section>
<section id="detect-mode-input-dir">
<h3><code class="docutils literal notranslate"><span class="pre">_detect_mode(input_dir)</span></code><a class="headerlink" href="#detect-mode-input-dir" title="Link to this heading"></a></h3>
<p>Infer conversion mode based on the contents of <code class="docutils literal notranslate"><span class="pre">input_dir</span></code>.</p>
</section>
<section id="merge-args-parser-overrides">
<h3><code class="docutils literal notranslate"><span class="pre">_merge_args(parser,</span> <span class="pre">overrides)</span></code><a class="headerlink" href="#merge-args-parser-overrides" title="Link to this heading"></a></h3>
<p>Merge override values into the default parser namespace.</p>
</section>
<section id="run-doctags-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_run_doctags(argv)</span></code><a class="headerlink" href="#run-doctags-argv" title="Link to this heading"></a></h3>
<p>Execute the DocTags conversion subcommand.</p>
</section>
<section id="preview-list-items-limit">
<h3><code class="docutils literal notranslate"><span class="pre">_preview_list(items,</span> <span class="pre">limit)</span></code><a class="headerlink" href="#preview-list-items-limit" title="Link to this heading"></a></h3>
<p>Return a truncated preview list with remainder hint.</p>
</section>
<section id="plan-doctags-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_plan_doctags(argv)</span></code><a class="headerlink" href="#plan-doctags-argv" title="Link to this heading"></a></h3>
<p>Compute which DocTags inputs would be processed.</p>
</section>
<section id="plan-chunk-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_plan_chunk(argv)</span></code><a class="headerlink" href="#plan-chunk-argv" title="Link to this heading"></a></h3>
<p>Compute which DocTags files the chunk stage would touch.</p>
</section>
<section id="plan-embed-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_plan_embed(argv)</span></code><a class="headerlink" href="#plan-embed-argv" title="Link to this heading"></a></h3>
<p>Compute which chunk files the embed stage would process or validate.</p>
</section>
<section id="display-plan-plans">
<h3><code class="docutils literal notranslate"><span class="pre">_display_plan(plans)</span></code><a class="headerlink" href="#display-plan-plans" title="Link to this heading"></a></h3>
<p>Pretty-print plan summaries to stdout.</p>
</section>
<section id="run-all-argv">
<h3><code class="docutils literal notranslate"><span class="pre">_run_all(argv)</span></code><a class="headerlink" href="#run-all-argv" title="Link to this heading"></a></h3>
<p>Execute DocTags conversion, chunking, and embedding sequentially.</p>
</section>
<section id="main-argv">
<h3><code class="docutils literal notranslate"><span class="pre">main(argv)</span></code><a class="headerlink" href="#main-argv" title="Link to this heading"></a></h3>
<p>Dispatch to one of the DocParsing subcommands.</p>
</section>
<section id="id1">
<h3><code class="docutils literal notranslate"><span class="pre">run_all(argv)</span></code><a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>Public wrapper for the <code class="docutils literal notranslate"><span class="pre">all</span></code> subcommand.</p>
</section>
<section id="chunk-argv">
<h3><code class="docutils literal notranslate"><span class="pre">chunk(argv)</span></code><a class="headerlink" href="#chunk-argv" title="Link to this heading"></a></h3>
<p>Public wrapper for the <code class="docutils literal notranslate"><span class="pre">chunk</span></code> subcommand.</p>
</section>
<section id="embed-argv">
<h3><code class="docutils literal notranslate"><span class="pre">embed(argv)</span></code><a class="headerlink" href="#embed-argv" title="Link to this heading"></a></h3>
<p>Public wrapper for the <code class="docutils literal notranslate"><span class="pre">embed</span></code> subcommand.</p>
</section>
<section id="doctags-argv">
<h3><code class="docutils literal notranslate"><span class="pre">doctags(argv)</span></code><a class="headerlink" href="#doctags-argv" title="Link to this heading"></a></h3>
<p>Public wrapper for the <code class="docutils literal notranslate"><span class="pre">doctags</span></code> subcommand.</p>
</section>
<section id="token-profiles-argv">
<h3><code class="docutils literal notranslate"><span class="pre">token_profiles(argv)</span></code><a class="headerlink" href="#token-profiles-argv" title="Link to this heading"></a></h3>
<p>Public wrapper for the <code class="docutils literal notranslate"><span class="pre">token-profiles</span></code> subcommand.</p>
</section>
<section id="plan-argv">
<h3><code class="docutils literal notranslate"><span class="pre">plan(argv)</span></code><a class="headerlink" href="#plan-argv" title="Link to this heading"></a></h3>
<p>Public wrapper for the <code class="docutils literal notranslate"><span class="pre">plan</span></code> subcommand.</p>
</section>
<section id="manifest-argv">
<h3><code class="docutils literal notranslate"><span class="pre">manifest(argv)</span></code><a class="headerlink" href="#manifest-argv" title="Link to this heading"></a></h3>
<p>Public wrapper for the <code class="docutils literal notranslate"><span class="pre">manifest</span></code> subcommand.</p>
</section>
<section id="coerce-pair-values">
<h3><code class="docutils literal notranslate"><span class="pre">_coerce_pair(values)</span></code><a class="headerlink" href="#coerce-pair-values" title="Link to this heading"></a></h3>
<p>Coerce timeout sequences to <code class="docutils literal notranslate"><span class="pre">(connect,</span> <span class="pre">read)</span></code> floats.</p>
</section>
<section id="entry-self-doc-id">
<h3><code class="docutils literal notranslate"><span class="pre">entry(self,</span> <span class="pre">doc_id)</span></code><a class="headerlink" href="#entry-self-doc-id" title="Link to this heading"></a></h3>
<p>Return the manifest entry associated with <code class="docutils literal notranslate"><span class="pre">doc_id</span></code> when available.</p>
</section>
<section id="should-skip-self-doc-id-output-path-input-hash">
<h3><code class="docutils literal notranslate"><span class="pre">should_skip(self,</span> <span class="pre">doc_id,</span> <span class="pre">output_path,</span> <span class="pre">input_hash)</span></code><a class="headerlink" href="#should-skip-self-doc-id-output-path-input-hash" title="Link to this heading"></a></h3>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> when work for <code class="docutils literal notranslate"><span class="pre">doc_id</span></code> can be safely skipped.</p>
</section>
<section id="should-process-self-doc-id-output-path-input-hash">
<h3><code class="docutils literal notranslate"><span class="pre">should_process(self,</span> <span class="pre">doc_id,</span> <span class="pre">output_path,</span> <span class="pre">input_hash)</span></code><a class="headerlink" href="#should-process-self-doc-id-output-path-input-hash" title="Link to this heading"></a></h3>
<p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> when <code class="docutils literal notranslate"><span class="pre">doc_id</span></code> requires processing.</p>
</section>
<section id="walk-current">
<h3><code class="docutils literal notranslate"><span class="pre">_walk(current)</span></code><a class="headerlink" href="#walk-current" title="Link to this heading"></a></h3>
<p><em>No documentation available.</em></p>
</section>
<section id="length-bucket-length">
<h3><code class="docutils literal notranslate"><span class="pre">_length_bucket(length)</span></code><a class="headerlink" href="#length-bucket-length" title="Link to this heading"></a></h3>
<p>Return the power-of-two bucket for <code class="docutils literal notranslate"><span class="pre">length</span></code>.</p>
</section>
<section id="ordered-indices-self">
<h3><code class="docutils literal notranslate"><span class="pre">_ordered_indices(self)</span></code><a class="headerlink" href="#ordered-indices-self" title="Link to this heading"></a></h3>
<p><em>No documentation available.</em></p>
</section>
<section id="iter-self">
<h3><code class="docutils literal notranslate"><span class="pre">__iter__(self)</span></code><a class="headerlink" href="#iter-self" title="Link to this heading"></a></h3>
<p><em>No documentation available.</em></p>
</section>
</section>
<section id="classes">
<h2>3. Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h2>
<section id="clioption">
<h3><code class="docutils literal notranslate"><span class="pre">CLIOption</span></code><a class="headerlink" href="#clioption" title="Link to this heading"></a></h3>
<p>Declarative CLI argument specification used by <code class="docutils literal notranslate"><span class="pre">build_subcommand</span></code>.</p>
</section>
<section id="bm25stats">
<h3><code class="docutils literal notranslate"><span class="pre">BM25Stats</span></code><a class="headerlink" href="#bm25stats" title="Link to this heading"></a></h3>
<p>Corpus-level statistics required for BM25 weighting.</p>
</section>
<section id="spladecfg">
<h3><code class="docutils literal notranslate"><span class="pre">SpladeCfg</span></code><a class="headerlink" href="#spladecfg" title="Link to this heading"></a></h3>
<p>Runtime configuration for SPLADE sparse encoding.</p>
</section>
<section id="qwencfg">
<h3><code class="docutils literal notranslate"><span class="pre">QwenCfg</span></code><a class="headerlink" href="#qwencfg" title="Link to this heading"></a></h3>
<p>Configuration for generating dense embeddings with Qwen via vLLM.</p>
</section>
<section id="chunkworkerconfig">
<h3><code class="docutils literal notranslate"><span class="pre">ChunkWorkerConfig</span></code><a class="headerlink" href="#chunkworkerconfig" title="Link to this heading"></a></h3>
<p>Lightweight configuration shared across chunker worker processes.</p>
</section>
<section id="chunktask">
<h3><code class="docutils literal notranslate"><span class="pre">ChunkTask</span></code><a class="headerlink" href="#chunktask" title="Link to this heading"></a></h3>
<p>Work unit describing a single DocTags file to chunk.</p>
</section>
<section id="chunkresult">
<h3><code class="docutils literal notranslate"><span class="pre">ChunkResult</span></code><a class="headerlink" href="#chunkresult" title="Link to this heading"></a></h3>
<p>Result envelope emitted by chunker workers.</p>
</section>
<section id="resumecontroller">
<h3><code class="docutils literal notranslate"><span class="pre">ResumeController</span></code><a class="headerlink" href="#resumecontroller" title="Link to this heading"></a></h3>
<p>Centralize resume/force decisions using manifest metadata.</p>
</section>
<section id="batcher">
<h3><code class="docutils literal notranslate"><span class="pre">Batcher</span></code><a class="headerlink" href="#batcher" title="Link to this heading"></a></h3>
<p>Yield fixed-size batches from an iterable with optional policies.</p>
<p>Args:
iterable: Source iterable providing items to batch.
batch_size: Maximum number of elements per yielded batch.
policy: Optional batching policy. When <code class="docutils literal notranslate"><span class="pre">&quot;length&quot;</span></code> the iterable is
bucketed by <code class="docutils literal notranslate"><span class="pre">lengths</span></code> before batching.
lengths: Sequence of integer lengths aligned with <code class="docutils literal notranslate"><span class="pre">iterable</span></code> used for
length-aware batching policies.</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>list(Batcher([1, 2, 3, 4, 5], 2))
[[1, 2], [3, 4], [5]]</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="command">
<h3><code class="docutils literal notranslate"><span class="pre">_Command</span></code><a class="headerlink" href="#command" title="Link to this heading"></a></h3>
<p>Callable wrapper storing handler metadata for subcommands.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, DocsToKG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>