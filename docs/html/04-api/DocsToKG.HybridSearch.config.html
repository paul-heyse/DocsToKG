

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Module: config &mdash; DocsToKG 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            DocsToKG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../01-overview/index.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02-setup/index.html">1. Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03-architecture/index.html">1. Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../05-development/index.html">1. Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../06-operations/index.html">1. Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../07-reference/index.html">1. Technical Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">DocsToKG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">1. Module: config</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/04-api/DocsToKG.HybridSearch.config.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-config">
<h1>1. Module: config<a class="headerlink" href="#module-config" title="Link to this heading"></a></h1>
<p>This reference documents the DocsToKG module <code class="docutils literal notranslate"><span class="pre">DocsToKG.HybridSearch.config</span></code>.</p>
<section id="overview">
<h2>1. Overview<a class="headerlink" href="#overview" title="Link to this heading"></a></h2>
<p>Configuration models and manager for hybrid search.</p>
<p>This module provides comprehensive configuration management for DocsToKG’s
hybrid search capabilities, including chunking, indexing, fusion, and
retrieval parameters with thread-safe configuration management.</p>
</section>
<section id="functions">
<h2>2. Functions<a class="headerlink" href="#functions" title="Link to this heading"></a></h2>
<section id="from-dict-payload">
<h3><code class="docutils literal notranslate"><span class="pre">from_dict(payload)</span></code><a class="headerlink" href="#from-dict-payload" title="Link to this heading"></a></h3>
<p>Construct a config object from a dictionary payload.</p>
<p>Args:
payload: Nested mapping containing <code class="docutils literal notranslate"><span class="pre">chunking</span></code>, <code class="docutils literal notranslate"><span class="pre">dense</span></code>, <code class="docutils literal notranslate"><span class="pre">fusion</span></code>,
and <code class="docutils literal notranslate"><span class="pre">retrieval</span></code> sections compatible with dataclass fields.</p>
<p>Returns:
Fully populated <code class="docutils literal notranslate"><span class="pre">HybridSearchConfig</span></code> instance.</p>
</section>
<section id="get-self">
<h3><code class="docutils literal notranslate"><span class="pre">get(self)</span></code><a class="headerlink" href="#get-self" title="Link to this heading"></a></h3>
<p>Return the currently cached hybrid search configuration.</p>
<p>Args:
None</p>
<p>Returns:
Latest <code class="docutils literal notranslate"><span class="pre">HybridSearchConfig</span></code> loaded from disk.</p>
</section>
<section id="reload-self">
<h3><code class="docutils literal notranslate"><span class="pre">reload(self)</span></code><a class="headerlink" href="#reload-self" title="Link to this heading"></a></h3>
<p>Reload configuration from disk, replacing the cached instance.</p>
<p>Args:
None</p>
<p>Returns:
Freshly loaded <code class="docutils literal notranslate"><span class="pre">HybridSearchConfig</span></code>.</p>
<p>Raises:
FileNotFoundError: If the configuration path is missing.
ValueError: If the config file is invalid JSON or YAML.</p>
</section>
<section id="load-self">
<h3><code class="docutils literal notranslate"><span class="pre">_load(self)</span></code><a class="headerlink" href="#load-self" title="Link to this heading"></a></h3>
<p>Load configuration data from the configured path (JSON or YAML).</p>
<p>Args:
None</p>
<p>Returns:
:class:<code class="docutils literal notranslate"><span class="pre">HybridSearchConfig</span></code> constructed from the on-disk payload.</p>
<p>Raises:
FileNotFoundError: If the configuration file is missing.
ValueError: If JSON or YAML decoding fails or yields invalid structure.</p>
</section>
<section id="load-yaml-self-raw">
<h3><code class="docutils literal notranslate"><span class="pre">_load_yaml(self,</span> <span class="pre">raw)</span></code><a class="headerlink" href="#load-yaml-self-raw" title="Link to this heading"></a></h3>
<p>Parse YAML configuration content into a dictionary.</p>
<p>Args:
raw: Raw YAML string read from disk.</p>
<p>Returns:
Dictionary representation suitable for :class:<code class="docutils literal notranslate"><span class="pre">HybridSearchConfig.from_dict</span></code>.</p>
<p>Raises:
ValueError: If PyYAML is unavailable or the content does not define a mapping.</p>
</section>
</section>
<section id="classes">
<h2>3. Classes<a class="headerlink" href="#classes" title="Link to this heading"></a></h2>
<section id="chunkingconfig">
<h3><code class="docutils literal notranslate"><span class="pre">ChunkingConfig</span></code><a class="headerlink" href="#chunkingconfig" title="Link to this heading"></a></h3>
<p>Configuration for document chunking operations.</p>
<p>Defines how documents are split into smaller chunks for processing
and indexing, balancing between context preservation and search
granularity.</p>
<p>Attributes:
max_tokens: Maximum number of tokens per chunk (800 default)
overlap: Number of tokens to overlap between chunks (150 default)</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>config = ChunkingConfig(max_tokens=1000, overlap=200)</p>
<p class="rubric" id="creates-chunks-with-1000-tokens-max-200-token-overlap">Creates chunks with 1000 tokens max, 200 token overlap</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="denseindexconfig">
<h3><code class="docutils literal notranslate"><span class="pre">DenseIndexConfig</span></code><a class="headerlink" href="#denseindexconfig" title="Link to this heading"></a></h3>
<p>Configuration for FAISS dense vector indexing.</p>
<p>Controls the behavior of vector similarity search using FAISS,
including index type selection and performance parameters.</p>
<p>Attributes:
index_type: Type of FAISS index (“flat”, “ivf_flat”, “ivf_pq”)
nlist: Number of Voronoi cells for IVF indexes (1024 default)
nprobe: Number of cells to search for IVF indexes (8 default)
pq_m: Number of sub-quantizers for PQ indexes (16 default)
pq_bits: Bits per sub-quantizer for PQ indexes (8 default)
oversample: Oversampling factor for IVF training samples (2 default)
device: GPU device ordinal for FAISS operations (0 default)
ivfpq_use_precomputed: Use precomputed IVFPQ lookup tables (True default)
ivfpq_float16_lut: Use float16 IVFPQ lookup tables when available (True default)
multi_gpu_mode: Replica strategy for multi-GPU hosts (“single” default)
gpu_temp_memory_bytes: Optional temporary memory pool size for FAISS GPU ops
gpu_indices_32_bit: When True, store FAISS indices in 32-bit format to save VRAM
expected_ntotal: Hint for anticipated index size; used to pre-reserve GPU memory
rebuild_delete_threshold: Pending delete count before forcing full rebuild
force_64bit_ids: Force FAISS to use 64-bit IDs even when 32-bit would suffice
interleaved_layout: Enable GPU interleaved layout optimisations when supported
flat_use_fp16: Use float16 compute for flat indexes when available
persist_mode: Persistence policy (“cpu_bytes” default, disable for GPU-only runtime)
ivf_train_factor: Controls IVF training sample size per nlist shard</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>config = DenseIndexConfig(
…     index_type=”ivf_pq”,
…     nlist=4096,
…     nprobe=32,
…     pq_m=32,
…     pq_bits=8
… )</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="fusionconfig">
<h3><code class="docutils literal notranslate"><span class="pre">FusionConfig</span></code><a class="headerlink" href="#fusionconfig" title="Link to this heading"></a></h3>
<p>Configuration for result fusion and ranking.</p>
<p>Controls how results from different retrieval methods (BM25, SPLADE,
dense vectors) are combined and ranked for optimal relevance.</p>
<p>Attributes:
k0: RRF (Reciprocal Rank Fusion) parameter (60.0 default)
mmr_lambda: MMR diversification parameter (0.6 default)
enable_mmr: Whether to apply MMR diversification (True default)
cosine_dedupe_threshold: Cosine similarity threshold for deduplication (0.98 default)
max_chunks_per_doc: Maximum chunks to return per document (3 default)</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>config = FusionConfig(
…     k0=50.0,
…     mmr_lambda=0.7,
…     enable_mmr=True,
…     max_chunks_per_doc=5
… )</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="retrievalconfig">
<h3><code class="docutils literal notranslate"><span class="pre">RetrievalConfig</span></code><a class="headerlink" href="#retrievalconfig" title="Link to this heading"></a></h3>
<p>Configuration for individual retrieval methods.</p>
<p>Controls the behavior of each retrieval method (BM25, SPLADE, dense)
including how many candidates each method should return.</p>
<p>Attributes:
bm25_top_k: Number of BM25 candidates to retrieve (50 default)
splade_top_k: Number of SPLADE candidates to retrieve (50 default)
dense_top_k: Number of dense vector candidates to retrieve (50 default)
dense_overfetch_factor: Multiplier applied to oversampled dense requests (1.5 default)
dense_oversample: Query-time oversample multiplier for dense retrieval (2.0 default)
bm25_scoring: “compat” for legacy dot-product, “true” for Okapi BM25
bm25_k1: Okapi BM25 k1 parameter (used when bm25_scoring == “true”)
bm25_b: Okapi BM25 b parameter (used when bm25_scoring == “true”)</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>config = RetrievalConfig(
…     bm25_top_k=100,
…     splade_top_k=75,
…     dense_top_k=25
… )</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="hybridsearchconfig">
<h3><code class="docutils literal notranslate"><span class="pre">HybridSearchConfig</span></code><a class="headerlink" href="#hybridsearchconfig" title="Link to this heading"></a></h3>
<p>Complete configuration for hybrid search operations.</p>
<p>This class aggregates all configuration for hybrid search functionality,
providing a single source of truth for all search-related parameters.</p>
<p>Attributes:
chunking: Document chunking configuration
dense: Dense vector indexing configuration
fusion: Result fusion and ranking configuration
retrieval: Individual retrieval method configuration</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>config = HybridSearchConfig(
…     chunking=ChunkingConfig(max_tokens=1000),
…     dense=DenseIndexConfig(index_type=”ivf_pq”),
…     fusion=FusionConfig(enable_mmr=True),
…     retrieval=RetrievalConfig(bm25_top_k=100)
… )</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
<section id="hybridsearchconfigmanager">
<h3><code class="docutils literal notranslate"><span class="pre">HybridSearchConfigManager</span></code><a class="headerlink" href="#hybridsearchconfigmanager" title="Link to this heading"></a></h3>
<p>File-backed configuration manager with reload support.</p>
<p>Attributes:
_path: Path to the JSON/YAML configuration file.
_lock: Threading lock guarding concurrent reloads.
_config: Cached HybridSearchConfig instance.</p>
<p>Examples:</p>
<blockquote>
<div><blockquote>
<div><blockquote>
<div><p>manager = HybridSearchConfigManager(Path(“config.json”))  # doctest: +SKIP
isinstance(manager.get(), HybridSearchConfig)  # doctest: +SKIP
True</p>
</div></blockquote>
</div></blockquote>
</div></blockquote>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, DocsToKG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>