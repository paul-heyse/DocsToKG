

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Ontology Downloader Configuration &mdash; DocsToKG 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/css/custom.css" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            DocsToKG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="01-overview/index.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="02-setup/index.html">1. Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="03-architecture/index.html">1. Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="04-api/index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="05-development/index.html">1. Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="06-operations/index.html">1. Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="07-reference/index.html">1. Technical Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DocsToKG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">1. Ontology Downloader Configuration</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/ontology_downloader_config.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ontology-downloader-configuration">
<h1>1. Ontology Downloader Configuration<a class="headerlink" href="#ontology-downloader-configuration" title="Link to this heading"></a></h1>
<p>The DocsToKG ontology downloader uses a YAML configuration file (typically <code class="docutils literal notranslate"><span class="pre">sources.yaml</span></code>) to
describe where ontologies should be downloaded from and how the pipeline behaves. The file is
divided into a <code class="docutils literal notranslate"><span class="pre">defaults</span></code> section and an <code class="docutils literal notranslate"><span class="pre">ontologies</span></code> list.</p>
<section id="installation">
<h2>2. Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h2>
<p>Install the downloader and all required dependencies inside your virtual environment:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span>.<span class="o">[</span>ontology-download<span class="o">]</span>
</pre></div>
</div>
<p>If you prefer to install the minimal dependency set manually, ensure the following packages are
available: <code class="docutils literal notranslate"><span class="pre">bioregistry</span></code>, <code class="docutils literal notranslate"><span class="pre">oaklib</span></code>, <code class="docutils literal notranslate"><span class="pre">ols-client</span></code>, <code class="docutils literal notranslate"><span class="pre">ontoportal-client</span></code>, <code class="docutils literal notranslate"><span class="pre">rdflib</span></code>, <code class="docutils literal notranslate"><span class="pre">pronto</span></code>,
<code class="docutils literal notranslate"><span class="pre">owlready2</span></code>, <code class="docutils literal notranslate"><span class="pre">arelle</span></code>, <code class="docutils literal notranslate"><span class="pre">pystow</span></code>, <code class="docutils literal notranslate"><span class="pre">pooch</span></code>, <code class="docutils literal notranslate"><span class="pre">pyyaml</span></code>, and <code class="docutils literal notranslate"><span class="pre">requests</span></code>.</p>
</section>
<section id="pystow-configuration">
<h2>3. Pystow Configuration<a class="headerlink" href="#pystow-configuration" title="Link to this heading"></a></h2>
<p>The downloader stores cache, configuration, and logs using <a class="reference external" href="https://pystow.readthedocs.io/">pystow</a>
under <code class="docutils literal notranslate"><span class="pre">~/.data/ontology-fetcher/</span></code> by default. Override locations and credentials via environment
variables:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Purpose</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ONTOFETCH_HOME</span></code></p></td>
<td><p>Override the root directory for cache/config storage.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ONTOFETCH_MAX_RETRIES</span></code></p></td>
<td><p>Override HTTP retry count.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ONTOFETCH_TIMEOUT_SEC</span></code></p></td>
<td><p>Override HTTP timeout.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ONTOFETCH_PER_HOST_RATE_LIMIT</span></code></p></td>
<td><p>Override per-host rate limit (e.g., <code class="docutils literal notranslate"><span class="pre">2/second</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ONTOFETCH_BACKOFF_FACTOR</span></code></p></td>
<td><p>Override exponential backoff factor.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ONTOFETCH_LOG_LEVEL</span></code></p></td>
<td><p>Override default log level.</p></td>
</tr>
</tbody>
</table>
<p>BioPortal API keys can be stored at <code class="docutils literal notranslate"><span class="pre">~/.data/ontology-fetcher/configs/bioportal_api_key.txt</span></code>. OLS
credentials (if required) can be stored in <code class="docutils literal notranslate"><span class="pre">~/.data/ontology-fetcher/configs/ols_api_token.txt</span></code>.</p>
</section>
<section id="defaults">
<h2>4. Defaults<a class="headerlink" href="#defaults" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">accept_licenses</span></code></p></td>
<td><p>list of strings</p></td>
<td><p>Allowed license identifiers. Downloads fail closed if a license is not listed.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">normalize_to</span></code></p></td>
<td><p>list of strings</p></td>
<td><p>Formats to produce in the normalization step (e.g., <code class="docutils literal notranslate"><span class="pre">ttl</span></code>, <code class="docutils literal notranslate"><span class="pre">obographs</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">prefer_source</span></code></p></td>
<td><p>list of strings</p></td>
<td><p>Resolver preference order for ad-hoc downloads.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">http</span></code></p></td>
<td><p>mapping</p></td>
<td><p>HTTP behaviour (<code class="docutils literal notranslate"><span class="pre">max_retries</span></code>, <code class="docutils literal notranslate"><span class="pre">timeout_sec</span></code>, <code class="docutils literal notranslate"><span class="pre">download_timeout_sec</span></code>, <code class="docutils literal notranslate"><span class="pre">backoff_factor</span></code>, <code class="docutils literal notranslate"><span class="pre">per_host_rate_limit</span></code>, <code class="docutils literal notranslate"><span class="pre">max_download_size_gb</span></code>, <code class="docutils literal notranslate"><span class="pre">concurrent_downloads</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">validation</span></code></p></td>
<td><p>mapping</p></td>
<td><p>Validation timeouts and limits (<code class="docutils literal notranslate"><span class="pre">parser_timeout_sec</span></code>, <code class="docutils literal notranslate"><span class="pre">max_memory_mb</span></code>, <code class="docutils literal notranslate"><span class="pre">skip_reasoning_if_size_mb</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">logging</span></code></p></td>
<td><p>mapping</p></td>
<td><p>Structured logging configuration (<code class="docutils literal notranslate"><span class="pre">level</span></code>, <code class="docutils literal notranslate"><span class="pre">max_log_size_mb</span></code>, <code class="docutils literal notranslate"><span class="pre">retention_days</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">continue_on_error</span></code></p></td>
<td><p>bool</p></td>
<td><p>Continue batch processing after an error (default <code class="docutils literal notranslate"><span class="pre">true</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">concurrent_downloads</span></code></p></td>
<td><p>int</p></td>
<td><p>Future parallelism control (currently informational).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ontology-entries">
<h2>5. Ontology Entries<a class="headerlink" href="#ontology-entries" title="Link to this heading"></a></h2>
<p>Each entry in <code class="docutils literal notranslate"><span class="pre">ontologies</span></code> must provide at least an <code class="docutils literal notranslate"><span class="pre">id</span></code>. Optional keys include <code class="docutils literal notranslate"><span class="pre">resolver</span></code>
(one of <code class="docutils literal notranslate"><span class="pre">obo</span></code>, <code class="docutils literal notranslate"><span class="pre">ols</span></code>, <code class="docutils literal notranslate"><span class="pre">bioportal</span></code>, <code class="docutils literal notranslate"><span class="pre">skos</span></code>, <code class="docutils literal notranslate"><span class="pre">xbrl</span></code>), <code class="docutils literal notranslate"><span class="pre">extras</span></code> (resolver-specific parameters), and
<code class="docutils literal notranslate"><span class="pre">target_formats</span></code> (format priority for the resolver).</p>
</section>
<section id="example">
<h2>6. Example<a class="headerlink" href="#example" title="Link to this heading"></a></h2>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">defaults</span><span class="p">:</span>
<span class="w">  </span><span class="nt">accept_licenses</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;CC-BY-4.0&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;CC0-1.0&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;OGL-UK-3.0&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">normalize_to</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;ttl&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;obographs&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">prefer_source</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;obo&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;ols&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;bioportal&quot;</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="s">&quot;direct&quot;</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="nt">http</span><span class="p">:</span>
<span class="w">    </span><span class="nt">max_retries</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">timeout_sec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">    </span><span class="nt">download_timeout_sec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">300</span>
<span class="w">    </span><span class="nt">backoff_factor</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0.5</span>
<span class="w">    </span><span class="nt">per_host_rate_limit</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4/second&quot;</span>
<span class="w">    </span><span class="nt">max_download_size_gb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5</span>
<span class="w">    </span><span class="nt">concurrent_downloads</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
<span class="w">  </span><span class="nt">validation</span><span class="p">:</span>
<span class="w">    </span><span class="nt">parser_timeout_sec</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">    </span><span class="nt">max_memory_mb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2048</span>
<span class="w">    </span><span class="nt">skip_reasoning_if_size_mb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">500</span>
<span class="w">  </span><span class="nt">logging</span><span class="p">:</span>
<span class="w">    </span><span class="nt">level</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;INFO&quot;</span>
<span class="w">    </span><span class="nt">max_log_size_mb</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100</span>
<span class="w">    </span><span class="nt">retention_days</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<span class="w">  </span><span class="nt">continue_on_error</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>

<span class="nt">ontologies</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">hp</span>
<span class="w">    </span><span class="nt">resolver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">obo</span>
<span class="w">    </span><span class="nt">target_formats</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">owl</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">obo</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">efo</span>
<span class="w">    </span><span class="nt">resolver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ols</span>
<span class="w">    </span><span class="nt">target_formats</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">owl</span><span class="p p-Indicator">]</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ncit</span>
<span class="w">    </span><span class="nt">resolver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bioportal</span>
<span class="w">    </span><span class="nt">extras</span><span class="p">:</span>
<span class="w">      </span><span class="nt">acronym</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">NCIT</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">eurovoc</span>
<span class="w">    </span><span class="nt">resolver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">skos</span>
<span class="w">    </span><span class="nt">extras</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Replace with the official EuroVoc Turtle download URL for your deployment</span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://example.com/eurovoc.ttl</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ifrs</span>
<span class="w">    </span><span class="nt">resolver</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">xbrl</span>
<span class="w">    </span><span class="nt">extras</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># Replace with the XBRL taxonomy archive URL</span>
<span class="w">      </span><span class="nt">url</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://example.com/ifrs-taxonomy.zip</span>
</pre></div>
</div>
<p>When a resolver requires additional hints, populate the <code class="docutils literal notranslate"><span class="pre">extras</span></code> mapping:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Resolver</p></th>
<th class="head"><p>Required extras</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bioportal</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">acronym</span></code> (defaults to uppercase <code class="docutils literal notranslate"><span class="pre">id</span></code> if omitted)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">acronym:</span> <span class="pre">NCIT</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">skos</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">url</span></code> pointing directly to the SKOS/RDF download</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">url:</span> <span class="pre">https://example.com/eurovoc.ttl</span></code></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">xbrl</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">url</span></code> pointing to the taxonomy ZIP archive</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">url:</span> <span class="pre">https://example.com/ifrs-taxonomy.zip</span></code></p></td>
</tr>
</tbody>
</table>
</section>
<section id="cli-usage">
<h2>7. CLI Usage<a class="headerlink" href="#cli-usage" title="Link to this heading"></a></h2>
<p>Use the <code class="docutils literal notranslate"><span class="pre">ontofetch</span></code> command to operate the downloader:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Download ontologies declared in sources.yaml</span>
ontofetch<span class="w"> </span>pull<span class="w"> </span>--spec<span class="w"> </span>~/.data/ontology-fetcher/configs/sources.yaml

<span class="c1"># Download a single ontology using defaults</span>
ontofetch<span class="w"> </span>pull<span class="w"> </span>hp<span class="w"> </span>--resolver<span class="w"> </span>obo<span class="w"> </span>--target-formats<span class="w"> </span>owl,obo

<span class="c1"># Show stored manifest information</span>
ontofetch<span class="w"> </span>show<span class="w"> </span>hp<span class="w"> </span>--versions

<span class="c1"># Re-run validators on an existing download</span>
ontofetch<span class="w"> </span>validate<span class="w"> </span>hp<span class="w"> </span>--json<span class="w"> </span>--rdflib<span class="w"> </span>--pronto

<span class="c1"># Validate configuration files (long-form and shortcut)</span>
ontofetch<span class="w"> </span>config<span class="w"> </span>validate<span class="w"> </span>--spec<span class="w"> </span>./sources.yaml<span class="w"> </span>--json
ontofetch<span class="w"> </span>config-validate<span class="w"> </span>--spec<span class="w"> </span>./sources.yaml
</pre></div>
</div>
<p>All subcommands accept <code class="docutils literal notranslate"><span class="pre">--json</span></code> for machine-readable output and <code class="docutils literal notranslate"><span class="pre">--log-level</span></code> to adjust verbosity.</p>
</section>
<section id="resolver-requirements">
<h2>8. Resolver Requirements<a class="headerlink" href="#resolver-requirements" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Resolver</p></th>
<th class="head"><p>Requirements</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">obo</span></code> / <code class="docutils literal notranslate"><span class="pre">bioregistry</span></code></p></td>
<td><p>Internet access to OBO Library mirrors.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ols</span></code></p></td>
<td><p>Public instances require no credentials; private instances may require API tokens stored at <code class="docutils literal notranslate"><span class="pre">~/.data/ontology-fetcher/configs/ols_api_token.txt</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bioportal</span></code></p></td>
<td><p>BioPortal API key stored at <code class="docutils literal notranslate"><span class="pre">~/.data/ontology-fetcher/configs/bioportal_api_key.txt</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">skos</span></code></p></td>
<td><p>Direct HTTPS URL to RDF/SKOS asset.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">xbrl</span></code></p></td>
<td><p>HTTPS URL to taxonomy ZIP; Arelle must be installed for validation.</p></td>
</tr>
</tbody>
</table>
<p>ROBOT conversions require a Java runtime and the <code class="docutils literal notranslate"><span class="pre">robot</span></code> CLI in <code class="docutils literal notranslate"><span class="pre">PATH</span></code>.</p>
</section>
<section id="troubleshooting">
<h2>9. Troubleshooting<a class="headerlink" href="#troubleshooting" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Symptom</p></th>
<th class="head"><p>Resolution</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">HTTP</span> <span class="pre">401/403</span></code> from BioPortal/OLS</p></td>
<td><p>Ensure API keys exist at the paths above and have the correct permissions.</p></td>
</tr>
<tr class="row-odd"><td><p>Repeated download retries</p></td>
<td><p>Increase backoff/timeout via environment variables; check network connectivity.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">No</span> <span class="pre">space</span> <span class="pre">left</span> <span class="pre">on</span> <span class="pre">device</span></code></p></td>
<td><p>Free disk space under the configured cache directory. Partial <code class="docutils literal notranslate"><span class="pre">.part</span></code> files are cleaned automatically.</p></td>
</tr>
<tr class="row-odd"><td><p>Validation memory errors</p></td>
<td><p>Increase available memory or disable heavy validators using CLI flags (e.g., <code class="docutils literal notranslate"><span class="pre">--no-robot</span></code>).</p></td>
</tr>
<tr class="row-even"><td><p>Rate-limit warnings</p></td>
<td><p>Reduce concurrency or adjust <code class="docutils literal notranslate"><span class="pre">per_host_rate_limit</span></code> in configuration.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Permission</span> <span class="pre">denied</span> <span class="pre">writing</span> <span class="pre">to</span></code></p></td>
<td><p>Set <code class="docutils literal notranslate"><span class="pre">PYSTOW_HOME</span></code> to a writable directory and retry.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="storage-layout-manifest-schema">
<h2>10. Storage Layout &amp; Manifest Schema<a class="headerlink" href="#storage-layout-manifest-schema" title="Link to this heading"></a></h2>
<p>Downloaded ontologies are stored under <code class="docutils literal notranslate"><span class="pre">~/.data/ontology-fetcher/ontologies/&lt;id&gt;/&lt;version&gt;/</span></code> with
sub-directories <code class="docutils literal notranslate"><span class="pre">original/</span></code>, <code class="docutils literal notranslate"><span class="pre">normalized/</span></code>, and <code class="docutils literal notranslate"><span class="pre">validation/</span></code>. The <code class="docutils literal notranslate"><span class="pre">manifest.json</span></code> file includes:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Field</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">id</span></code></p></td>
<td><p>Ontology identifier.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">resolver</span></code></p></td>
<td><p>Resolver used to obtain the artifact.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">url</span></code></p></td>
<td><p>Final HTTPS URL of the download.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">filename</span></code></p></td>
<td><p>Stored filename in <code class="docutils literal notranslate"><span class="pre">original/</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">version</span></code></p></td>
<td><p>Resolver-provided version (or timestamp).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">license</span></code></p></td>
<td><p>Declared license if available.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">status</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">fresh</span></code>, <code class="docutils literal notranslate"><span class="pre">cached</span></code>, or <code class="docutils literal notranslate"><span class="pre">updated</span></code>.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">sha256</span></code></p></td>
<td><p>SHA-256 checksum of the downloaded file.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">etag</span></code>, <code class="docutils literal notranslate"><span class="pre">last_modified</span></code></p></td>
<td><p>HTTP provenance headers.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">downloaded_at</span></code></p></td>
<td><p>UTC timestamp of the download.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">target_formats</span></code></p></td>
<td><p>Requested output formats.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">validation</span></code></p></td>
<td><p>Validator results keyed by validator name.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">artifacts</span></code></p></td>
<td><p>List of stored artifact paths (including extracted ZIP contents).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="example-workflows">
<h2>11. Example Workflows<a class="headerlink" href="#example-workflows" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><strong>Batch download</strong>: Populate <code class="docutils literal notranslate"><span class="pre">sources.yaml</span></code>, then run <code class="docutils literal notranslate"><span class="pre">ontofetch</span> <span class="pre">pull</span> <span class="pre">--spec</span> <span class="pre">sources.yaml</span></code> to
download all configured ontologies in one run.</p></li>
<li><p><strong>Incremental update</strong>: Re-run <code class="docutils literal notranslate"><span class="pre">ontofetch</span> <span class="pre">pull</span> <span class="pre">--spec</span> <span class="pre">sources.yaml</span></code> periodically; ETag/Last-Modified
headers prevent redundant downloads. Use <code class="docutils literal notranslate"><span class="pre">--force</span></code> to bypass caches when required.</p></li>
<li><p><strong>Validation-only reruns</strong>: For previously downloaded ontologies, execute <code class="docutils literal notranslate"><span class="pre">ontofetch</span> <span class="pre">validate</span> <span class="pre">hp&#64;2024-01-01</span> <span class="pre">--robot</span></code>
to regenerate validation reports without redownloading.</p></li>
</ol>
</section>
<section id="validation">
<h2>12. Validation<a class="headerlink" href="#validation" title="Link to this heading"></a></h2>
<p>Validate configuration files using the CLI:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>ontofetch<span class="w"> </span>config<span class="w"> </span>validate<span class="w"> </span>--spec<span class="w"> </span>path/to/sources.yaml
</pre></div>
</div>
<p>The command exits with a non-zero status if structural issues are detected. Missing configuration files
emit a clear message and exit with code <code class="docutils literal notranslate"><span class="pre">2</span></code>.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, DocsToKG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>