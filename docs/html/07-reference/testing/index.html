

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>1. Testing Strategies &mdash; DocsToKG 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/custom.css" />

  
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=8d563738"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            DocsToKG
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../01-overview/index.html">1. Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../02-setup/index.html">1. Setup Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../03-architecture/index.html">1. Architecture Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../04-api/index.html">1. API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../05-development/index.html">1. Development Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06-operations/index.html">1. Operations Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../index.html">1. Technical Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">DocsToKG</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">1. Testing Strategies</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/07-reference/testing/index.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="testing-strategies">
<h1>1. Testing Strategies<a class="headerlink" href="#testing-strategies" title="Link to this heading"></a></h1>
<p>DocsToKG ships an extensive pytest suite that spans content download resiliency, DocParsing pipelines, ontology workflows, and hybrid search quality. The sections below highlight the primary test packages, key markers, and supporting validation scripts.</p>
<section id="test-suite-map">
<h2>2. Test Suite Map<a class="headerlink" href="#test-suite-map" title="Link to this heading"></a></h2>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Path</p></th>
<th class="head"><p>Focus</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tests/content_download/</span></code></p></td>
<td><p>Resolver pipeline, networking retries, manifest sinks.</p></td>
<td><p>Requires optional dependencies (<code class="docutils literal notranslate"><span class="pre">pyalex</span></code>, <code class="docutils literal notranslate"><span class="pre">beautifulsoup4</span></code>, <code class="docutils literal notranslate"><span class="pre">trafilatura</span></code>). Tests fall back to stubs where available.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tests/docparsing/</span></code></p></td>
<td><p>Chunker CLI, embedding pipeline, docstring and NAVMAP validation.</p></td>
<td><p>Includes smoke tests for <code class="docutils literal notranslate"><span class="pre">docparse</span> <span class="pre">chunk</span></code> / <code class="docutils literal notranslate"><span class="pre">docparse</span> <span class="pre">embed</span></code> and the underlying <code class="docutils literal notranslate"><span class="pre">chunking</span></code> / <code class="docutils literal notranslate"><span class="pre">embedding</span></code> runtimes.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tests/hybrid_search/test_suite.py</span></code></p></td>
<td><p>Hybrid search ranking, fusion, FAISS integration.</p></td>
<td><p>Uses custom markers <code class="docutils literal notranslate"><span class="pre">real_vectors</span></code> and <code class="docutils literal notranslate"><span class="pre">scale_vectors</span></code> for GPU-backed assertions.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tests/ontology_download/</span></code></p></td>
<td><p>CLI, configuration, storage backends, validation flows.</p></td>
<td><p>Skips gracefully when <code class="docutils literal notranslate"><span class="pre">pydantic-settings</span></code> or fsspec extras are missing.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tests/pipeline/</span></code></p></td>
<td><p>End-to-end orchestration and retry controllers.</p></td>
<td><p>Marked with <code class="docutils literal notranslate"><span class="pre">&#64;pytest.mark.integration</span></code> for slower runs.</p></td>
</tr>
</tbody>
</table>
<p>Run the default unit suite with:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>direnv<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>.<span class="w"> </span>pytest<span class="w"> </span>-q
</pre></div>
</div>
<p>Optional suites:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">pytest</span> <span class="pre">-m</span> <span class="pre">real_vectors</span> <span class="pre">--real-vectors</span></code> – Loads FAISS-backed fixtures and real embeddings.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">pytest</span> <span class="pre">-m</span> <span class="pre">scale_vectors</span> <span class="pre">--scale-vectors</span></code> – Stress tests on large vector sets (GPU recommended).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">pytest</span> <span class="pre">-m</span> <span class="pre">&quot;not</span> <span class="pre">integration&quot;</span></code> – Skip network-heavy integration checks on pull requests.</p></li>
</ul>
<p>Markers are defined in <code class="docutils literal notranslate"><span class="pre">pyproject.toml</span></code> under <code class="docutils literal notranslate"><span class="pre">[tool.pytest.ini_options]</span></code>.</p>
</section>
<section id="documentation-annotation-validation">
<h2>3. Documentation &amp; Annotation Validation<a class="headerlink" href="#documentation-annotation-validation" title="Link to this heading"></a></h2>
<p>Keep generated documentation in sync with the codebase before merging:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>direnv<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>.<span class="w"> </span>python<span class="w"> </span>docs/scripts/validate_docs.py
direnv<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>.<span class="w"> </span>python<span class="w"> </span>docs/scripts/generate_api_docs.py
direnv<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>.<span class="w"> </span>python<span class="w"> </span>docs/scripts/check_links.py<span class="w"> </span>--timeout<span class="w"> </span><span class="m">10</span>
direnv<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>.<span class="w"> </span>python<span class="w"> </span>docs/scripts/validate_code_annotations.py
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">validate_code_annotations.py</span></code> enforces NAVMAP ordering and docstring completeness, reducing surprises in <code class="docutils literal notranslate"><span class="pre">docs/04-api/</span></code> rebuilds.</p>
</section>
<section id="benchmark-fixture-data">
<h2>4. Benchmark &amp; Fixture Data<a class="headerlink" href="#benchmark-fixture-data" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">tests/data/hybrid_dataset.jsonl</span></code> – Baseline for hybrid search recall and latency comparisons.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tests/data/ontology/</span></code> – Controlled ontologies for checksum, normalization, and storage tests.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tests/fixtures/</span></code> – Synthetic DocTags, chunk manifests, and resolver payloads used across pipelines.</p></li>
</ul>
<p>When schemas evolve (for example new manifest fields), regenerate or update these fixtures and document the change in <code class="docutils literal notranslate"><span class="pre">docs/05-development/index.md</span></code>.</p>
</section>
<section id="continuous-integration-recommendations">
<h2>5. Continuous Integration Recommendations<a class="headerlink" href="#continuous-integration-recommendations" title="Link to this heading"></a></h2>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">./scripts/bootstrap_env.sh</span></code> (installs <code class="docutils literal notranslate"><span class="pre">.venv</span></code> with bundled wheels).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">python</span> <span class="pre">docs/scripts/validate_code_annotations.py</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">python</span> <span class="pre">docs/scripts/validate_docs.py</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">pytest</span> <span class="pre">-m</span> <span class="pre">&quot;not</span> <span class="pre">(real_vectors</span> <span class="pre">or</span> <span class="pre">scale_vectors)&quot;</span></code>.</p></li>
<li><p>Publish coverage reports or store <code class="docutils literal notranslate"><span class="pre">pytest</span></code> JUnit XML for diagnostics.</p></li>
</ol>
<p>Nightly/weekly pipelines should additionally exercise:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">pytest</span> <span class="pre">-m</span> <span class="pre">real_vectors</span> <span class="pre">--real-vectors</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">pytest</span> <span class="pre">-m</span> <span class="pre">scale_vectors</span> <span class="pre">--scale-vectors</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">direnv</span> <span class="pre">exec</span> <span class="pre">.</span> <span class="pre">python</span> <span class="pre">-m</span> <span class="pre">DocsToKG.HybridSearch.validation</span></code> for regression dashboards.</p></li>
</ul>
<p>See <code class="docutils literal notranslate"><span class="pre">docs/06-operations/index.md</span></code> for scheduler templates and operational checklists.</p>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, DocsToKG Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>