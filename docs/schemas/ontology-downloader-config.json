{
  "$defs": {
    "DefaultsConfig": {
      "additionalProperties": false,
      "description": "Collection of default settings for ontology fetch specifications.",
      "properties": {
        "accept_licenses": {
          "items": {
            "type": "string"
          },
          "title": "Accept Licenses",
          "type": "array"
        },
        "normalize_to": {
          "items": {
            "type": "string"
          },
          "title": "Normalize To",
          "type": "array"
        },
        "prefer_source": {
          "items": {
            "type": "string"
          },
          "title": "Prefer Source",
          "type": "array"
        },
        "http": {
          "$ref": "#/$defs/DownloadConfiguration"
        },
        "validation": {
          "$ref": "#/$defs/ValidationConfig"
        },
        "logging": {
          "$ref": "#/$defs/LoggingConfiguration"
        },
        "continue_on_error": {
          "default": true,
          "title": "Continue On Error",
          "type": "boolean"
        }
      },
      "title": "DefaultsConfig",
      "type": "object"
    },
    "DownloadConfiguration": {
      "description": "HTTP download and retry settings.",
      "properties": {
        "max_retries": {
          "default": 5,
          "maximum": 20,
          "minimum": 0,
          "title": "Max Retries",
          "type": "integer"
        },
        "timeout_sec": {
          "default": 30,
          "exclusiveMinimum": 0,
          "maximum": 300,
          "title": "Timeout Sec",
          "type": "integer"
        },
        "download_timeout_sec": {
          "default": 300,
          "exclusiveMinimum": 0,
          "maximum": 3600,
          "title": "Download Timeout Sec",
          "type": "integer"
        },
        "backoff_factor": {
          "default": 0.5,
          "maximum": 10.0,
          "minimum": 0.1,
          "title": "Backoff Factor",
          "type": "number"
        },
        "per_host_rate_limit": {
          "default": "4/second",
          "description": "Token bucket style rate limit expressed as <number>/<unit>",
          "pattern": "^([\\d.]+)/(second|sec|s|minute|min|m|hour|h)$",
          "title": "Per Host Rate Limit",
          "type": "string"
        },
        "max_download_size_gb": {
          "default": 5.0,
          "exclusiveMinimum": 0,
          "maximum": 100.0,
          "title": "Max Download Size Gb",
          "type": "number"
        },
        "concurrent_downloads": {
          "default": 1,
          "maximum": 10,
          "minimum": 1,
          "title": "Concurrent Downloads",
          "type": "integer"
        },
        "validate_media_type": {
          "default": true,
          "title": "Validate Media Type",
          "type": "boolean"
        },
        "rate_limits": {
          "additionalProperties": {
            "type": "string"
          },
          "title": "Rate Limits",
          "type": "object"
        },
        "allowed_hosts": {
          "anyOf": [
            {
              "items": {
                "type": "string"
              },
              "type": "array"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Allowed Hosts"
        }
      },
      "title": "DownloadConfiguration",
      "type": "object"
    },
    "LoggingConfiguration": {
      "description": "Structured logging options for ontology download operations.",
      "properties": {
        "level": {
          "default": "INFO",
          "description": "Logging level (DEBUG, INFO, WARNING, ERROR)",
          "title": "Level",
          "type": "string"
        },
        "max_log_size_mb": {
          "default": 100,
          "description": "Maximum log file size in megabytes before rotation",
          "exclusiveMinimum": 0,
          "title": "Max Log Size Mb",
          "type": "integer"
        },
        "retention_days": {
          "default": 30,
          "description": "Number of days to retain log files",
          "minimum": 1,
          "title": "Retention Days",
          "type": "integer"
        }
      },
      "title": "LoggingConfiguration",
      "type": "object"
    },
    "ValidationConfig": {
      "description": "Validation limits governing parser execution.",
      "properties": {
        "parser_timeout_sec": {
          "default": 60,
          "description": "Parser timeout in seconds (maximum one hour)",
          "exclusiveMinimum": 0,
          "maximum": 3600,
          "title": "Parser Timeout Sec",
          "type": "integer"
        },
        "max_memory_mb": {
          "default": 2048,
          "description": "Maximum memory in megabytes allocated to validators",
          "exclusiveMinimum": 0,
          "title": "Max Memory Mb",
          "type": "integer"
        },
        "skip_reasoning_if_size_mb": {
          "default": 500,
          "description": "Disable reasoning when ontology exceeds this size in MB",
          "exclusiveMinimum": 0,
          "title": "Skip Reasoning If Size Mb",
          "type": "integer"
        }
      },
      "title": "ValidationConfig",
      "type": "object"
    }
  },
  "description": "Schema for DocsToKG ontology downloader sources.yaml",
  "properties": {
    "defaults": {
      "$ref": "#/$defs/DefaultsConfig"
    },
    "specs": {
      "items": {},
      "title": "Specs",
      "type": "array"
    }
  },
  "required": [
    "defaults"
  ],
  "title": "Ontology Downloader Configuration",
  "type": "object",
  "$schema": "https://json-schema.org/draft/2020-12/schema"
}